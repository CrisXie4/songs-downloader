# 网易云音乐下载器 v2.0

一个简洁、易用的网易云音乐下载工具，支持歌单批量下载和单曲下载。采用模块化设计，易于维护和扩展。

## ⚠️ 重要声明

**本工具仅供个人学习、技术研究和测试使用。请尊重音乐版权，支持正版音乐！**

- 所有音乐版权归原作者、艺术家和版权所有者所有
- 请勿用于商业用途或侵犯版权的行为
- 建议通过正规渠道购买和收听音乐以支持艺术家
- [查看完整法律声明](web/public/pages/legal.html)

## ✨ 主要特性

- 🎵 **歌单下载** - 支持批量下载网易云音乐歌单
- 🎧 **单曲下载** - 快速下载单首歌曲
- 🔧 **多音乐源** - 支持多个音乐API源（网易云、QQ音乐、酷狗等）
- 📥 **浏览器下载** - 直接触发浏览器下载，不占用服务器存储空间
- 🎨 **现代UI** - 基于Vue 3和Tailwind CSS的现代化界面
- 📦 **模块化架构** - 前后端分离，代码结构清晰，易于维护
- ⚙️ **灵活配置** - 支持自定义API源和音质设置

## 📁 项目结构

```
wangyiyun/
├── web/
│   ├── public/                # 前端资源目录
│   │   ├── css/
│   │   │   └── styles.css     # 样式文件
│   │   ├── js/
│   │   │   └── app.js         # Vue应用主文件
│   │   ├── pages/
│   │   │   └── legal.html     # 法律声明页面
│   │   └── index.html         # 主页
│   ├── server.js              # Express后端服务器
│   ├── package.json           # 项目依赖配置
│   └── node_modules/          # 依赖包
├── music/                     # (已弃用) 之前版本的音乐下载目录
└── .config.json               # 用户配置文件
```

## 🚀 快速开始

### 环境要求

- Node.js 14.0 或更高版本
- npm 或 yarn 包管理器

### 安装步骤

1. **克隆或下载项目**
   ```bash
   cd wangyiyun/web
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动服务器**
   ```bash
   node server.js
   ```

4. **访问应用**

   在浏览器中打开: `http://localhost:5000`

## 📖 使用指南

### 下载歌单

1. 打开网易云音乐网页版
2. 找到想要下载的歌单
3. 复制歌单链接或ID（例如：`https://music.163.com/#/playlist?id=123456789`）
4. 在应用的"歌单下载"标签页粘贴链接
5. 点击"获取歌单"按钮
6. 选择要下载的歌曲（默认全选）
7. 点击"下载选中歌曲"按钮

### 下载单曲

1. 找到想要下载的歌曲
2. 复制歌曲链接或ID
3. 在"单曲下载"标签页粘贴链接
4. （可选）自定义文件名
5. 点击"立即下载"按钮

### 配置设置

在"设置"标签页可以配置：

- **API源选择**
  - 原始API（api.paugram.com）- 仅支持网易云音乐
  - GD Studio API（music-api.gdstudio.xyz）- 支持多音乐源

- **音乐源选择**（使用GD Studio API时）
  - 网易云音乐
  - QQ音乐
  - 酷狗音乐
  - 酷我音乐
  - 咪咕音乐
  - JOOX

- **音质选择**
  - 128k、192k、320k、740k、999k

## 🔧 技术栈

### 前端
- **Vue 3** - 渐进式JavaScript框架
- **Tailwind CSS** - 实用优先的CSS框架
- **Font Awesome** - 图标库

### 后端
- **Node.js** - JavaScript运行时
- **Express** - Web应用框架
- **Axios** - HTTP客户端
- **CORS** - 跨域资源共享中间件

## 🆕 v2.0 更新内容

### 主要改进

1. **模块化架构**
   - 前端代码拆分为HTML、CSS、JavaScript独立文件
   - 代码结构清晰，易于维护和扩展

2. **浏览器直接下载**
   - 不再将音乐文件保存到服务器
   - 直接触发浏览器下载机制
   - 节省服务器存储空间

3. **版权意识增强**
   - 添加详细的法律声明页面
   - 主页显示版权警告提示
   - 强调仅供学习研究使用

4. **用户体验优化**
   - 下载进度实时显示
   - 更好的错误提示信息
   - 改进的UI/UX设计

5. **代码质量提升**
   - 添加详细的代码注释
   - 改进的错误处理机制
   - 统一的代码风格

## 🛠️ API接口说明

### 获取配置
```
GET /api/config
响应: { api_source, music_source, music_quality }
```

### 保存配置
```
POST /api/config
请求体: { apiSource, musicSource, musicQuality }
```

### 获取歌单
```
POST /api/playlist/fetch
请求体: { url: "歌单链接或ID" }
```

### 获取单曲信息
```
POST /api/single/info
请求体: { url: "歌曲链接或ID" }
```

### 获取下载URL
```
POST /api/download/url
请求体: { id, name, artists }
响应: { status, url, filename }
```

## ⚡ 性能优化建议

1. **避免同时下载过多歌曲**
   - 批量下载时会自动控制下载速度（每首歌间隔500ms）
   - 建议分批次下载大型歌单

2. **选择合适的API源**
   - 根据网络环境选择响应速度快的API源
   - 如果某个API源不可用，可切换到备用源

3. **合理选择音质**
   - 高音质文件更大，下载时间更长
   - 根据需求选择合适的音质

## 🐛 常见问题

### 下载失败怎么办？

1. 检查网络连接是否正常
2. 尝试切换不同的API源
3. 某些歌曲可能因版权限制无法下载
4. 查看浏览器控制台的错误信息

### 配置保存在哪里？

配置保存在项目根目录的 `.config.json` 文件中。

### 如何更改服务器端口？

修改 `web/server.js` 文件中的 `port` 变量：
```javascript
const port = 5000; // 改为其他端口号
```

## 📄 许可证

本项目仅供学习交流使用，不得用于商业目的。

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📮 联系方式

如有问题或建议，欢迎通过以下方式联系：
- 提交GitHub Issue
- 发送邮件反馈

---

**再次提醒：请尊重音乐版权，支持正版音乐！** 🎵
